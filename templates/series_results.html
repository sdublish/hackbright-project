{% extends 'base.html' %}
{% block title %} {{ title }} {% endblock %}
{% block content %}
<h1> {{ title }} </h1>
{% if series|length > 0 %}
<form action="/series-result" id="series-search" method="POST">
{% for id, name in series.items() %}
<input type="radio" value= "{{ id }}" name="series"> <span id="{{ id }}">{{ name }} </span><br>
{% endfor %}<br>
<!-- Will need to pass date info into AJAX to make it work -->
Publishing Date Timeframe: <br>
    <input type="radio" name="timeframe" checked value="0"> Default <br>
    <input type="radio" name="timeframe" value="183"> Next Six Months <br>
    <input type="radio" name="timeframe" value="365"> Next Year <br>
<input type="submit" name="Look up series">
</form>
<div id="results"> </div>
<p> None of these are right? Click <a href="/adv-search">here</a> to go back to the advanced search form. </p>
{% else %}
<p> No series were found. Please click <a href="/adv-search">here</a> to return back to advanced search </p>
{% endif %}

 <script>
 // Need to attach 'get date on submit' to button as well
function showResults(result){
    let title = result.title;
    let published = result.published;
    let phrase = `${title} was published in ${published}.`;
    $("#results").text(phrase);
}

function searchSeries(evt){
    evt.preventDefault();
    let seriesID = $('input[name=series]:checked').val();
    let IDAsString = `#${seriesID}`;
    let seriesName = $(IDAsString).text();
    let formInputs = {'id': seriesID, 'name': seriesName};
    $.post("/series-result.json", formInputs, showResults);
}



$("#series-search").on("submit", searchSeries);
 </script>
 {% endblock %}