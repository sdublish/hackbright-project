{% extends 'base.html' %}
{% block title %} Search {% endblock %}
{% block content %}
<h1> Search </h1>
<!-- Thing which would be cool to do: have people tell me if they're searching by author or series 
    and modify the form to show the proper fields depending on user input -->
<!-- Use the buttons or something, things which only allow one option -->

<form id="search" action="/search" method="POST">
    <input hidden type="text" name="date" id="date">
    Author: <input type="text" name="author"><br>
    Series: <select name="series"> 
    <option selected value> -- select an option -- </option>{% for s in series %}
    <option value="{{s.series_name}}"> {{ s.series_name }} </option>
    {% endfor %}
</select><br>
    Publishing Date Timeframe: <br>
    <input type="radio" name="timeframe" checked value="0"> Default <br>
    <input type="radio" name="timeframe" value="183"> Next Six Months <br>
    <input type="radio" name="timeframe" value="365"> Next Year <br>
    <input type="Submit" value="Search">
</form>
<div id="results"> </div>
{% if "search_history" in session %}
{{ session.search_history }}
{% endif %}

<script>
$("#search").on("submit", function(){
    let date = new Date();
    $("#date").val(date.toDateString());
});

// $("#search").on("submit", function(evt){
//     evt.preventDefault();
//     let author;
//     let series;
//     // need to check to see what javascript gets from an empty field

// });
// Things I need to put in here:
// Check to see if at least one field is filled out
// If not, complain (if zero or two)
// if author is filled out, do an author query
// else do a series query
// and shove the results into the div land
</script>
{% endblock %}